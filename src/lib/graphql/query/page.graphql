query PageContent($uri: ID!) {
  page(id: $uri, idType: URI) {
    id
    backgroundColour {
      backgroundColour
    }
    editorBlocks {
      name
      parentClientId
      clientId
      ...CoreParagraphFragment
      ...CoreHeadingFragment
      ...AcfHomePageHeroFragment
      ...AcfServicePushFragment
      ...CoreColumnsFragment
      ...AcfGalerieFragment
      ...AcfPortfolioBlockFragment
      ...CoreGroupFragment
      ...CoreButtonFragment
      ...CoreButtonsFragment
      ...CoreSpacerFragment
      ...PortfolioBlockDetailsFragment
      ...AcfLinkBlockFragment
      ...CoreImageFragment
    }
    seo {
      ...SeoFragment
    }
  }
}

fragment SeoFragment on PostTypeSEO {
  metaDesc
  metaKeywords
  opengraphSiteName
  opengraphTitle
  opengraphPublisher
  opengraphUrl
  title
  twitterDescription
  twitterTitle
  twitterImage {
    altText
    mediaDetails {
      ...MediaDetailsFragment
    }
  }
  opengraphImage {
    altText
    mediaDetails {
      ...MediaDetailsFragment
    }
  }
}

fragment PortfolioBlockDetailsFragment on AcfPortfolioBlock {
  name
  attributes {
    align
  }
  portfolioBlock {
    portfolioItems {
      nodes {
        slug
        ... on Nhtbl_project {
          title(format: RENDERED)
          projectData {
            imageGallery {
              nodes {
                altText
                mediaDetails {
                  sizes {
                    sourceUrl
                    width
                    height
                    name
                  }
                }
              }
            }
          }
          content(format: RENDERED)
          featuredImage {
            node {
              altText
              mediaDetails {
                sizes {
                  height
                  width
                  name
                  sourceUrl
                }
              }
            }
          }
        }
      }
    }
  }
}

fragment MediaDetailsFragment on MediaDetails {
  sizes {
    name
    sourceUrl
    width
    height
  }
}

fragment CoreGroupFragment on CoreGroup {
  attributes {
    backgroundColor
    align
    style
  }
}

fragment CoreImageFragment on CoreImage {
  attributes {
    alt
    align
    aspectRatio
    borderColor
    caption
    cssClassName
    sizeSlug
    style
  }
  mediaDetails {
    ...MediaDetailsFragment
  }
}

fragment CoreButtonFragment on CoreButton {
  attributes {
    backgroundColor
    style
    fontSize
    linkTarget
    text
    url
  }
  innerBlocks {
    apiVersion
    blockEditorCategoryName
    clientId
    name
    parentClientId
    renderedHtml
  }
}

fragment AcfLinkBlockFragment on AcfLinkBlock {
  innerBlocks {
      name
      parentClientId
      clientId
      ...CoreParagraphFragment
      ...CoreHeadingFragment
      ...AcfHomePageHeroFragment
      ...AcfServicePushFragment
      ...CoreColumnsFragment
      ...AcfGalerieFragment
      ...AcfPortfolioBlockFragment
      ...CoreGroupFragment
      ...CoreButtonFragment
      ...CoreButtonsFragment
      ...CoreSpacerFragment
      ...PortfolioBlockDetailsFragment
      ...CoreImageFragment
  }
  attributes {
    align
    backgroundColor
  }
  linkBlock {
    internalLink {
      nodes {
        slug
        uri
      }
    }
    externalLink {
      url
      title
      target
    }
  }
}
fragment CoreColumnsFragment on CoreColumns {
  attributes {
    layout
    className
    verticalAlignment
    style
    align
  }
}

fragment AcfGalerieFragment on AcfGalerie {
  attributes {
    align
  }
  galerie {
    galerie {
      nodes {
        altText
        mediaType
        mimeType
        mediaItemUrl
        caption(format: RENDERED)
        mediaDetails {
          ...MediaDetailsFragment
        }
      }
    }
  }
}

fragment AcfPortfolioBlockFragment on AcfPortfolioBlock {
  attributes {
    alignment: align
  }
  portfolioBlock {
    portfolioItems {
      nodes {
        slug
        ... on Nhtbl_project {
          id
          uri
          nhtblClients {
            nodes {
              name
              slug
            }
          }
          projectData {
            imageGallery {
              nodes {
                altText
                mediaType
                mimeType
                mediaItemUrl

                mediaDetails {
                  ...MediaDetailsFragment
                }
              }
            }
          }
        }
      }
    }
  }
}

fragment CoreParagraphFragment on CoreParagraph {
  attributes {
    content
    fontFamily
    fontSize
    textColor
    align
  }
}

fragment AcfHomePageHeroFragment on AcfHomePageHero {
  attributes {
    backgroundColor
    align
  }
  homePageHero {
    images(first: 100) {
      nodes {
        mediaDetails {
          ...MediaDetailsFragment
        }
        altText
        mediaType
        mimeType
        mediaItemUrl
      }
    }
  }
}

fragment CoreHeadingFragment on CoreHeading {
  attributes {
    content
    fontFamily
    fontSize
    textColor
    textAlign
    level
    align
  }
}

fragment CoreSpacerFragment on CoreSpacer {
  attributes {
    height
    style
  }
}

fragment CoreButtonsFragment on CoreButtons {
  attributes {
    align
    layout
  }
}

fragment AcfServicePushFragment on AcfServicePush {
  attributes {
    align
    backgroundColor
  }
  servicePush {
    service {
      nodes {
        slug
        ... on Page {
          id
          title
          uri
          featuredImage {
            node {
              altText
              mediaDetails {
                ...MediaDetailsFragment
              }
            }
          }
        }
      }
    }
  }
}
